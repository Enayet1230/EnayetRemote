var suppressIAEvent=false;function isInputNumberKeyGood(a){var k;switch(a){case 8:case 9:case 16:case 20:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 45:case 46:case 144:return true}if(typeof vAllowedInputNumberKeycode!='undefined'&&vAllowedInputNumberKeycode.length>0){for(k=0;k<vAllowedInputNumberKeycode.length;k++){if(vAllowedInputNumberKeycode[k]==a)return true}}var b=elementFrame();if(b){if(typeof b.vAllowedInputNumberKeycode!='undefined'&&b.vAllowedInputNumberKeycode.length>0){for(k=0;k<b.vAllowedInputNumberKeycode.length;k++){if(b.vAllowedInputNumberKeycode[k]==a)return true}}}return false}function clearInputAnswers(){if(itd.isNavigating||!itd.itdLoadComplete)return;var a=elementFrame();if(a){if(a.vPageReadOnly)return;$(".ITSAnswer",a.document).each(function(i){$(this).val("")});$(".ITSAnswerList option[value='']",a.document).attr('selected',true)}}function inputAnswerSuppressionCheck(e,w){if(suppressIAEvent){return itd.ITDStopEvent(e,w)}return true}function inputAnswerCheck(a,b,c,d,e,w){suppressIAEvent=false;if(itd.isNavigating||!itd.itdLoadComplete)return itd.ITDStopEvent(e,w);var f=elementFrame();if(f){var g=f.vItemTypeList[a];e=(e)?e:((f.event)?f.event:null);var h=(e.which)?e.which:e.keyCode;var i=(e.altKey?1:0)+(e.ctrlKey?2:0)+(e.shiftKey?4:0);w=(w)?w:window;if(d!=0&&(h==111||h==191)){suppressIAEvent=true;if(typeof displayInputErrorMessage!='undefined')displayInputErrorMessage(d,h);return itd.ITDStopEvent(e,w)}var j=(h==109||h==189||(h==173&&navigator.userAgent.toLowerCase().indexOf('firefox')));if(g=='InputNumber'&&j){if(c.value.indexOf('-')!=-1){suppressIAEvent=true;c.value=c.value.substring(1,c.value.length);return itd.ITDStopEvent(e,w)}else if(c.value.indexOf('-')==-1){suppressIAEvent=true;c.value='-'+c.value;return itd.ITDStopEvent(e,w)}}else if(g=='InputFraction'&&j){var k=f.document.getElementById('NegativeSign'+a+'_'+b);if(k&&k.style.visibility!='visible'){suppressIAEvent=true;f.document.forms[0].elements['IsNegativeR'+a+'_'+b].value=true;k.style.visibility='visible';return itd.ITDStopEvent(e,w)}else if(k&&k.style.visibility=='visible'){suppressIAEvent=true;f.document.forms[0].elements['IsNegativeR'+a+'_'+b].value=false;k.style.visibility='hidden';return itd.ITDStopEvent(e,w)}else if(!k){suppressIAEvent=true;if(typeof displayInputErrorMessage!='undefined')displayInputErrorMessage(d,h);return itd.ITDStopEvent(e,w)}}if(g!='InputText'&&c.value.indexOf('.')!=-1&&(h==110||h==190)){suppressIAEvent=true;if(typeof displayInputErrorMessage!='undefined')displayInputErrorMessage(d,h);return itd.ITDStopEvent(e,w)}var l=false;if(d=='0')l=true;else if(i==0){switch(h){case 109:case 110:case 111:case 188:case 189:case 190:case 191:if(d=='2')l=true;break;default:if((h>=48&&h<=57)||(h>=96&&h<=105))l=true;break}}if(!l&&!isInputNumberKeyGood(h)){suppressIAEvent=true;if(typeof displayInputErrorMessage!='undefined')displayInputErrorMessage(d,h);return itd.ITDStopEvent(e,w)}}return true}function validateInteger(a){var b=/(^-?\d\d*$)/;return b.test(a)}function validateNumeric(a){var b=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/;return b.test(a)}function validateInputNumberItems(){var a=elementFrame();var i=0;var j=0;var b=0;if(a&&typeof(a.vHasInputNumber)!="undefined"&&a.vHasInputNumber){for(i=1;i<a.vItemTypeList.length;i++){if(a.vItemTypeList[i]=='InputNumber'||a.vItemTypeList[i]=='InputFraction'){b=parseInt(a.document.forms[0].elements['AnswerCountR'+i.toString()].value);for(j=1;j<=b;j++){if(a.vItemTypeList[i]=='InputNumber'){var c=a.document.getElementById('R'+i.toString()+'_'+j.toString());if(c!=null&&c.value!=''&&!validateNumeric(c.value))return false}else if(a.vItemTypeList[i]=='InputFraction'){var d=a.document.getElementById('R'+i.toString()+'_'+j.toString()+'N');var e=a.document.getElementById('R'+i.toString()+'_'+j.toString()+'D');if(d!=null&&d.value!=''&&!validateNumeric(d.value))return false;if(e!=null&&e.value!=''&&!validateNumeric(e.value))return false}}}}}return true}